  <div class="header-menu" style="width: 100%;">
  <div class="header">
    <img src="img/logo.gif" width="20%" alt="" />

    <%= link_to "SignOut", destroy_user_session_path,:class => "btn btn-danger pull-right sign-out-button", :method => :delete %>
    <%= link_to "GoToHome", root_path,:class => "btn btn-danger pull-right go-home-button", :method => :get %>
  </div>
  </div>

  <div class="container">

  <div class="library">
  <div class="main">
    
  <h2>Your Favorite Photos</h1>
  <hr>
  </div>
    <div class="row">
      <% @photos.each do |photo|%>
        <div class="col-md-4 col-sm-12">
          <a rel="leanModal" href="#div787" onClick="set_modal('<%= photo.image.to_s %>', '<%= photo.text.to_s %>', '<%= user_favorite_check(current_user, photo.id) %>', '<%= photo.id %>', '<%= photo.organization.id %>')"><%= image_tag(photo.image, :width => "80%", :alt => "" ) %></a>
         </div>
        <% end %>
      </div>
    </div>
  </div>
  <div class="container">
  <div class="main">
    <h2>Recommend!!</h2>
    <hr>

  </div>  
  
<% if @recommend_photos %>
  <div class = "row">
<% @recommend_photos.each do |photo| %>
  <div class="col-md-4 col-sm-12">
    <a rel="leanModal" href="#div787" onClick="set_modal('<%= photo.image.to_s %>', '<%= photo.text.to_s %>', '<%= user_favorite_check(current_user, photo.id) %>', '<%= photo.id %>', '<%= photo.organization.id %>')"><%= image_tag(photo.image, :width => "80%", :alt => "" ) %></a>
    </div>
  <% end %>
  </div>
  </div>
  <% end %>

</div>
</div>


<div id="div787">
  <img id="modal_image" alt="" /><p id="modal_text_target"></p>
<a href="" id="to-org"><div id="detail"><p>Area Detail</p></div></a>
<%= link_to favorite_path, method: :post, remote: true, id: "favorite_link" do %>
<i class="fa fa-heart" style="border: solid 1px #607D8B; padding: 3px 5px; color: #607D8B;" id="modal-like"></i>
<% end %>
</div>
<script type="text/javascript">
$(function() {
    $( 'a[rel*=leanModal]').leanModal({
        top: 50,                     // モーダルウィンドウの縦位置を指定
        overlay : 0.5,               // 背面の透明度
        closeButton: ".modal_close"  // 閉じるボタンのCSS classを指定
    });
});

function set_modal(url, text, liked, id, organization_id) {
  var modal_target = document.getElementById('modal_image');
  var modal_text_target = document.getElementById('modal_text_target');
  var modal_icon = $('#modal-like');
  var link_to_organization = document.getElementById('to-org');
  var favorite_link = document.getElementById('favorite_link');
  favorite_link.setAttribute('href', '/favorite' + '?photo_id=' + id);
  link_to_organization.setAttribute('href', '/organizations/' + organization_id);
  modal_target.setAttribute('src', url);
  modal_text_target.innerHTML = text;
  if(liked=="true") {
    modal_icon.addClass('liked');
  }else{
    modal_icon.removeClass('liked');
  }
}
</script>

